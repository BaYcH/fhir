map "http://hl7.org/fhir/StructureMap/ImmunizationRecommendation2to3" = "R2 to R3 Conversions for ImmunizationRecommendation"

uses "http://hl7.org/fhir/StructureDefinition/ImmunizationRecommendation" as source
uses "http://hl7.org/fhir/StructureDefinition/ImmunizationRecommendationR2" as target


group ImmunizationRecommendation extends Element
  input src : ImmunizationRecommendationR2 as source
  input tgt : ImmunizationRecommendation as Target

  "ImmunizationRecommendation-identifier" : for src.identifier as vs make tgt.identifier as vt then Identifier(vs,vt)
  "ImmunizationRecommendation-patient" : for src.patient as vs make tgt.patient as vt then Reference(vs,vt)
  "ImmunizationRecommendation-recommendation" : for src.recommendation as vs0 make tgt.recommendation = as vt0 then {
    "ImmunizationRecommendation.recommendation-date" : for vs0.date as vs make vt0.date as vt then dateTime(vs, vt)
    "ImmunizationRecommendation.recommendation-vaccineCode" : for vs0.vaccineCode as vs make vt0.vaccineCode as vt then CodeableConcept(vs,vt)
    "ImmunizationRecommendation.recommendation-doseNumber" : for vs0.doseNumber as vs make vt0.doseNumber as vt then positiveInt(vs, vt)
    "ImmunizationRecommendation.recommendation-forecastStatus" : for vs0.forecastStatus as vs make vt0.forecastStatus as vt then CodeableConcept(vs,vt)
    "ImmunizationRecommendation.recommendation-supportingImmunization" : for vs0.supportingImmunization as vs make vt0.supportingImmunization as vt then Reference(vs,vt)
    "ImmunizationRecommendation.recommendation-supportingPatientInformation" : for vs0.supportingPatientInformation as vs make vt0.supportingPatientInformation as vt then Reference(vs,vt)
  }
endgroup

