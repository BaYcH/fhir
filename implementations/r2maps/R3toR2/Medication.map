map "http://hl7.org/fhir/StructureMap/Medication3to2" = "R3 to R2 Conversion for Medication"

uses "http://hl7.org/fhir/StructureDefinition/Medication" alias Medication as source
uses "http://hl7.org/fhir/DSTU2/StructureDefinition/Medication" alias MedicationR2 as target

imports "http://hl7.org/fhir/StructureMap/primitives3to2"
imports "http://hl7.org/fhir/StructureMap/DomainResource3to2"
imports "http://hl7.org/fhir/StructureMap/Reference3to2"
imports "http://hl7.org/fhir/StructureMap/CodeableConcept3to2"

group for type+types  Medication extends DomainResource
  input src : Medication as source
  input tgt : MedicationR2 as target

  "Medication-code" : for src.code make tgt.code
  "Medication-isBrand" : for src.isBrand make tgt.isBrand
  "Medication-manufacturer" : for src.manufacturer make tgt.manufacturer
  "Medication-product" : for src.product as vs0 make tgt.product as vt0 then {
    "Medication.product-form" : for vs0.form make vt0.form
  }

  "Medication-package" : for src.package as vs0 make tgt.package as vt0 then {
    "Medication.package-container" : for vs0.container make vt0.container
  }


endgroup
