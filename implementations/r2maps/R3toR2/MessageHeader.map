map "http://hl7.org/fhir/StructureMap/MessageHeader3to2" = "R3 to R2 Conversion for MessageHeader"

uses "http://hl7.org/fhir/StructureDefinition/MessageHeader" alias MessageHeader as source
uses "http://hl7.org/fhir/DSTU2/StructureDefinition/MessageHeader" alias MessageHeaderR2 as target

imports "http://hl7.org/fhir/StructureMap/primitives3to2"
imports "http://hl7.org/fhir/StructureMap/DomainResource3to2"
imports "http://hl7.org/fhir/StructureMap/Coding3to2"
imports "http://hl7.org/fhir/StructureMap/Reference3to2"
imports "http://hl7.org/fhir/StructureMap/CodeableConcept3to2"

group for type+types  MessageHeader extends DomainResource
  input src : MessageHeader as source
  input tgt : MessageHeaderR2 as target

  "MessageHeader-timestamp" : for src.timestamp make tgt.timestamp
  "MessageHeader-event" : for src.event make tgt.event
  "MessageHeader-response" : for src.response as vs0 make tgt.response as vt0 then {
    "MessageHeader.response-identifier" : for vs0.identifier make vt0.identifier
    "MessageHeader.response-code" : for vs0.code make vt0.code
    "MessageHeader.response-details" : for vs0.details make vt0.details
  }

  "MessageHeader-enterer" : for src.enterer make tgt.enterer
  "MessageHeader-author" : for src.author make tgt.author
  "MessageHeader-receiver" : for src.receiver make tgt.receiver
  "MessageHeader-responsible" : for src.responsible make tgt.responsible
  "MessageHeader-reason" : for src.reason make tgt.reason
  "MessageHeader-data" : for src.data make tgt.data

endgroup
