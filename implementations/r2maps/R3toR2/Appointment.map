map "http://hl7.org/fhir/StructureMap/Appointment3to2" = "R3 to R2 Conversion for Appointment"

uses "http://hl7.org/fhir/StructureDefinition/AppointmentR2" as source
uses "http://hl7.org/fhir/StructureDefinition/Appointment" as target


group Appointment extends Element
  input src : Appointment as source
  input tgt : AppointmentR2 as Target
  "Appointment-identifier" : for src.identifier as vs make tgt.identifier as vt then Identifier(vs,vt)
  "Appointment-status" : for src.status as vs make tgt.status as vt then code(vs, vt)
  "Appointment-type" : for src.serviceType as vs make tgt.type as vt then CodeableConcept(vs,vt)
  "Appointment-reason" : for src.reason as vs make tgt.reason as vt then CodeableConcept(vs,vt)
  "Appointment-priority" : for src.priority as vs make tgt.priority as vt then unsignedInt(vs, vt)
  "Appointment-description" : for src.description as vs make tgt.description as vt then string(vs, vt)
  "Appointment-start" : for src.start as vs make tgt.start as vt then instant(vs, vt)
  "Appointment-end" : for src.end as vs make tgt.end as vt then instant(vs, vt)
  "Appointment-minutesDuration" : for src.minutesDuration as vs make tgt.minutesDuration as vt then positiveInt(vs, vt)
  "Appointment-slot" : for src.slot as vs make tgt.slot as vt then Reference(vs,vt)
  "Appointment-comment" : for src.comment as vs make tgt.comment as vt then string(vs, vt)
  "Appointment-participant" : for src.participant as vs0 make tgt.participant = as vt0 then {
    "Appointment.participant-type" : for vs0.type as vs make vt0.type as vt then CodeableConcept(vs,vt)
    "Appointment.participant-actor" : for vs0.actor as vs make vt0.actor as vt then Reference(vs,vt)
    "Appointment.participant-required" : for vs0.required as vs make vt0.required as vt then code(vs, vt)
    "Appointment.participant-status" : for vs0.status as vs make vt0.status as vt then code(vs, vt)
  }
endgroup

