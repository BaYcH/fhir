map "http://hl7.org/fhir/StructureMap/Goal3to2" = "R3 to R2 Conversion for Goal"

uses "http://hl7.org/fhir/StructureDefinition/GoalR2" as source
uses "http://hl7.org/fhir/StructureDefinition/Goal" as target


group Goal extends Element
  input src : Goal as source
  input tgt : GoalR2 as Target
  "Goal-identifier" : for src.identifier as vs make tgt.identifier as vt then Identifier(vs,vt)
  "Goal-subject" : for src.subject as vs make tgt.subject as vt then Reference(vs,vt)
  "Goal-start-date" : for src.start  : date as vs make tgt.start = create("date") as vt then date(vs,vt)
  "Goal-start-CodeableConcept" : for src.start  : CodeableConcept as vs make tgt.start = create("CodeableConcept") as vt then CodeableConcept(vs,vt)
  "Goal-target-date" : for src.target  : date as vs make tgt.target = create("date") as vt then date(vs,vt)
  "Goal-category" : for src.category as vs make tgt.category as vt then CodeableConcept(vs,vt)
  "Goal-status" : for src.status as vs make tgt.status as vt then code(vs, vt)
  "Goal-statusDate" : for src.statusDate as vs make tgt.statusDate as vt then date(vs, vt)
  "Goal-statusReason" : for src.statusReason as vs make tgt.statusReason as vt then CodeableConcept(vs,vt)
  "Goal-priority" : for src.priority as vs make tgt.priority as vt then CodeableConcept(vs,vt)
  "Goal-addresses" : for src.addresses as vs make tgt.addresses as vt then Reference(vs,vt)
  "Goal-note" : for src.note as vs make tgt.note as vt then Annotation(vs,vt)
  "Goal-outcome" : for src.outcome as vs0 make tgt.outcome = as vt0 then {
    "Goal.outcome-result-CodeableConcept" : for vs0.result  : CodeableConcept as vs make vt0.result = create("CodeableConcept") as vt then CodeableConcept(vs,vt)
    "Goal.outcome-result-Reference" : for vs0.result  : Reference as vs make vt0.result = create("Reference") as vt then Reference(vs,vt)
  }
endgroup

