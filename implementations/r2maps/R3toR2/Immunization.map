map "http://hl7.org/fhir/StructureMap/Immunization3to2" = "R3 to R2 Conversion for Immunization"

uses "http://hl7.org/fhir/StructureDefinition/Immunization" alias Immunization as source
uses "http://hl7.org/fhir/DSTU2/StructureDefinition/Immunization" alias ImmunizationR2 as target

imports "http://hl7.org/fhir/StructureMap/primitives3to2"
imports "http://hl7.org/fhir/StructureMap/DomainResource3to2"
imports "http://hl7.org/fhir/StructureMap/Identifier3to2"
imports "http://hl7.org/fhir/StructureMap/Reference3to2"
imports "http://hl7.org/fhir/StructureMap/Quantity3to2"
imports "http://hl7.org/fhir/StructureMap/Annotation3to2"
imports "http://hl7.org/fhir/StructureMap/CodeableConcept3to2"

group for type+types  Immunization extends DomainResource
  input src : Immunization as source
  input tgt : ImmunizationR2 as target

  "Immunization-identifier" : for src.identifier make tgt.identifier
  "Immunization-date" : for src.date make tgt.date
  "Immunization-vaccineCode" : for src.vaccineCode make tgt.vaccineCode
  "Immunization-patient" : for src.patient make tgt.patient
  "Immunization-wasNotGiven" : for src.wasNotGiven make tgt.wasNotGiven
  "Immunization-performer" : for src.performer make tgt.performer
  "Immunization-requester" : for src.requester make tgt.requester
  "Immunization-encounter" : for src.encounter make tgt.encounter
  "Immunization-manufacturer" : for src.manufacturer make tgt.manufacturer
  "Immunization-location" : for src.location make tgt.location
  "Immunization-lotNumber" : for src.lotNumber make tgt.lotNumber
  "Immunization-expirationDate" : for src.expirationDate make tgt.expirationDate
  "Immunization-site" : for src.site make tgt.site
  "Immunization-route" : for src.route make tgt.route
  "Immunization-doseQuantity" : for src.doseQuantity make tgt.doseQuantity
  "Immunization-note" : for src.note make tgt.note
  "Immunization-explanation" : for src.explanation as vs0 make tgt.explanation as vt0 then {
    "Immunization.explanation-reason" : for vs0.reason make vt0.reason
    "Immunization.explanation-reasonNotGiven" : for vs0.reasonNotGiven make vt0.reasonNotGiven
  }

  "Immunization-reaction" : for src.reaction as vs0 make tgt.reaction as vt0 then {
    "Immunization.reaction-date" : for vs0.date make vt0.date
    "Immunization.reaction-detail" : for vs0.detail make vt0.detail
    "Immunization.reaction-reported" : for vs0.reported make vt0.reported
  }

  "Immunization-vaccinationProtocol" : for src.vaccinationProtocol as vs0 make tgt.vaccinationProtocol as vt0 then {
    "Immunization.vaccinationProtocol-doseSequence" : for vs0.doseSequence make vt0.doseSequence
    "Immunization.vaccinationProtocol-description" : for vs0.description make vt0.description
    "Immunization.vaccinationProtocol-authority" : for vs0.authority make vt0.authority
    "Immunization.vaccinationProtocol-series" : for vs0.series make vt0.series
    "Immunization.vaccinationProtocol-seriesDoses" : for vs0.seriesDoses make vt0.seriesDoses
    "Immunization.vaccinationProtocol-targetDisease" : for vs0.targetDisease make vt0.targetDisease
    "Immunization.vaccinationProtocol-doseStatus" : for vs0.doseStatus make vt0.doseStatus
    "Immunization.vaccinationProtocol-doseStatusReason" : for vs0.doseStatusReason make vt0.doseStatusReason
  }


endgroup
