map "http://hl7.org/fhir/StructureMap/Goal4to3" = "R4 to R3 Conversion for Goal"


uses "http://hl7.org/fhir/StructureDefinition/Goal" alias Goal as source
uses "http://hl7.org/fhir/3.0/StructureDefinition/Goal" alias GoalR3 as target

imports "http://hl7.org/fhir/StructureMap/*4to3"



group for type+types Goal extends DomainResource
  input src : Goal as source
  input tgt : GoalR3 as target

  "Goal.identifier" : for src.identifier make tgt.identifier 
  "Goal.status" : for src.status make tgt.status 
  "Goal.category" : for src.category make tgt.category 
  "Goal.priority" : for src.priority make tgt.priority 
  "Goal.description" : for src.description make tgt.description 
  "Goal.subject" : for src.subject make tgt.subject 
  "Goal.start-date" : for src.start : date as vs make tgt.start = create("date") as vt then date(vs,vt)
  "Goal.start-CodeableConcept" : for src.start : CodeableConcept as vs make tgt.start = create("CodeableConcept") as vt then CodeableConcept(vs,vt)
  "Goal.target" : for src.target as vs0 make tgt.target as vt0 then {
    "Goal.target.measure" : for vs0.measure make vt0.measure 
    "Goal.target.detail-Quantity" : for vs0.detail : Quantity as vs make vt0.detail = create("Quantity") as vt then Quantity(vs,vt)
    "Goal.target.detail-Range" : for vs0.detail : Range as vs make vt0.detail = create("Range") as vt then Range(vs,vt)
    "Goal.target.detail-CodeableConcept" : for vs0.detail : CodeableConcept as vs make vt0.detail = create("CodeableConcept") as vt then CodeableConcept(vs,vt)
    "Goal.target.due-date" : for vs0.due : date as vs make vt0.due = create("date") as vt then date(vs,vt)
    "Goal.target.due-Duration" : for vs0.due : Duration as vs make vt0.due = create("Duration") as vt then Duration(vs,vt)
  }
  "Goal.statusDate" : for src.statusDate make tgt.statusDate 
  "Goal.statusReason" : for src.statusReason make tgt.statusReason 
  "Goal.expressedBy" : for src.expressedBy make tgt.expressedBy 
  "Goal.addresses" : for src.addresses make tgt.addresses 
  "Goal.note" : for src.note make tgt.note 
  "Goal.outcomeCode" : for src.outcomeCode make tgt.outcomeCode 
  "Goal.outcomeReference" : for src.outcomeReference make tgt.outcomeReference 
endgroup

