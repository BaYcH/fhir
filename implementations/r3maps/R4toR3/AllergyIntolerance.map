map "http://hl7.org/fhir/StructureMap/AllergyIntolerance4to3" = "R4 to R3 Conversion for AllergyIntolerance"


uses "http://hl7.org/fhir/StructureDefinition/AllergyIntolerance" alias AllergyIntolerance as source
uses "http://hl7.org/fhir/3.0/StructureDefinition/AllergyIntolerance" alias AllergyIntoleranceR3 as target

imports "http://hl7.org/fhir/StructureMap/*4to3"



group for type+types AllergyIntolerance extends DomainResource
  input src : AllergyIntolerance as source
  input tgt : AllergyIntoleranceR3 as target

  "AllergyIntolerance.identifier" : for src.identifier make tgt.identifier 
  "AllergyIntolerance.clinicalStatus" : for src.clinicalStatus make tgt.clinicalStatus 
  "AllergyIntolerance.verificationStatus" : for src.verificationStatus make tgt.verificationStatus 
  "AllergyIntolerance.type" : for src.type make tgt.type 
  "AllergyIntolerance.criticality" : for src.criticality make tgt.criticality 
  "AllergyIntolerance.code" : for src.code make tgt.code 
  "AllergyIntolerance.patient" : for src.patient make tgt.patient 
  "AllergyIntolerance.onset-dateTime" : for src.onset : dateTime as vs make tgt.onset = create("dateTime") as vt then dateTime(vs,vt)
  "AllergyIntolerance.onset-Age" : for src.onset : Age as vs make tgt.onset = create("Age") as vt then Age(vs,vt)
  "AllergyIntolerance.onset-Period" : for src.onset : Period as vs make tgt.onset = create("Period") as vt then Period(vs,vt)
  "AllergyIntolerance.onset-Range" : for src.onset : Range as vs make tgt.onset = create("Range") as vt then Range(vs,vt)
  "AllergyIntolerance.onset-string" : for src.onset : string as vs make tgt.onset = create("string") as vt then string(vs,vt)
  "AllergyIntolerance.assertedDate" : for src.recordedDate make tgt.assertedDate 
  "AllergyIntolerance.recorder" : for src.recorder make tgt.recorder 
  "AllergyIntolerance.asserter" : for src.asserter make tgt.asserter 
  "AllergyIntolerance.lastOccurrence" : for src.lastOccurrence make tgt.lastOccurrence 
  "AllergyIntolerance.note" : for src.note make tgt.note 
  "AllergyIntolerance.reaction" : for src.reaction as vs0 make tgt.reaction as vt0 then {
    "AllergyIntolerance.reaction.substance" : for vs0.substance make vt0.substance 
    "AllergyIntolerance.reaction.manifestation" : for vs0.manifestation make vt0.manifestation 
    "AllergyIntolerance.reaction.description" : for vs0.description make vt0.description 
    "AllergyIntolerance.reaction.onset" : for vs0.onset make vt0.onset 
    "AllergyIntolerance.reaction.severity" : for vs0.severity make vt0.severity 
    "AllergyIntolerance.reaction.exposureRoute" : for vs0.exposureRoute make vt0.exposureRoute 
    "AllergyIntolerance.reaction.note" : for vs0.note make vt0.note 
  }
endgroup

