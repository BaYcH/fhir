map "http://hl7.org/fhir/StructureMap/DiagnosticReport4to3" = "R4 to R3 Conversion for DiagnosticReport"


uses "http://hl7.org/fhir/StructureDefinition/DiagnosticReport" alias DiagnosticReport as source
uses "http://hl7.org/fhir/3.0/StructureDefinition/DiagnosticReport" alias DiagnosticReportR3 as target

imports "http://hl7.org/fhir/StructureMap/*4to3"



group for type+types DiagnosticReport extends DomainResource
  input src : DiagnosticReport as source
  input tgt : DiagnosticReportR3 as target

  "DiagnosticReport.identifier" : for src.identifier make tgt.identifier 
  "DiagnosticReport.basedOn" : for src.basedOn make tgt.basedOn 
  "DiagnosticReport.status" : for src.status make tgt.status 
  "DiagnosticReport.category" : for src.category make tgt.category 
  "DiagnosticReport.code" : for src.code make tgt.code 
  "DiagnosticReport.subject" : for src.subject make tgt.subject 
  "DiagnosticReport.context" : for src.context make tgt.context 
  "DiagnosticReport.effective-dateTime" : for src.effective : dateTime as vs make tgt.effective = create("dateTime") as vt then dateTime(vs,vt)
  "DiagnosticReport.effective-Period" : for src.effective : Period as vs make tgt.effective = create("Period") as vt then Period(vs,vt)
  "DiagnosticReport.issued" : for src.issued make tgt.issued 
  "DiagnosticReport.specimen" : for src.specimen make tgt.specimen 
  "DiagnosticReport.result" : for src.result make tgt.result 
  "DiagnosticReport.imagingStudy" : for src.imagingStudy make tgt.imagingStudy 
  "DiagnosticReport.image" : for src.media as vs0 make tgt.image as vt0 then {
    "DiagnosticReport.image.comment" : for vs0.comment make vt0.comment 
    "DiagnosticReport.image.link" : for vs0.link make vt0.link 
  }
  "DiagnosticReport.conclusion" : for src.conclusion make tgt.conclusion 
  "DiagnosticReport.conclusionCode" : for src.conclusionCode make tgt.codedDiagnosis 
  "DiagnosticReport.presentedForm" : for src.presentedForm make tgt.presentedForm 
endgroup

