map "http://hl7.org/fhir/StructureMap/Bundle4to3" = "R4 to R3 Conversion for Bundle"


uses "http://hl7.org/fhir/StructureDefinition/Bundle" alias Bundle as source
uses "http://hl7.org/fhir/3.0/StructureDefinition/Bundle" alias BundleR3 as target

imports "http://hl7.org/fhir/StructureMap/*4to3"



group for type+types Bundle extends Resource
  input src : Bundle as source
  input tgt : BundleR3 as target

  "Bundle.identifier" : for src.identifier make tgt.identifier 
  "Bundle.type" : for src.type make tgt.type 
  "Bundle.total" : for src.total make tgt.total 
  "Bundle.link" : for src.link as vs0 make tgt.link as vt0 then {
    "Bundle.link.relation" : for vs0.relation make vt0.relation 
    "Bundle.link.url" : for vs0.url make vt0.url 
  }
  "Bundle.entry" : for src.entry as vs0 make tgt.entry as vt0 then {
    "Bundle.entry.fullUrl" : for vs0.fullUrl make vt0.fullUrl 
  }
  "Bundle.signature" : for src.signature make tgt.signature 
endgroup

