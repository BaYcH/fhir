map "http://hl7.org/fhir/StructureMap/Composition3to4" = "R3 to R4 Conversions for Composition"


uses "http://hl7.org/fhir/3.0/StructureDefinition/Composition" alias CompositionR3 as source
uses "http://hl7.org/fhir/StructureDefinition/Composition" alias Composition as target

imports "http://hl7.org/fhir/StructureMap/*3to4"



group for type+types Composition extends DomainResource
  input src : CompositionR3 as source
  input tgt : Composition as target

  "Composition.identifier" : for src.identifier make tgt.identifier 
  "Composition.status" : for src.status make tgt.status 
  "Composition.type" : for src.type make tgt.type 
  "Composition.class" : for src.class make tgt.class 
  "Composition.subject" : for src.subject make tgt.subject 
  "Composition.encounter" : for src.encounter make tgt.encounter 
  "Composition.date" : for src.date make tgt.date 
  "Composition.author" : for src.author make tgt.author 
  "Composition.title" : for src.title make tgt.title 
  "Composition.confidentiality" : for src.confidentiality make tgt.confidentiality 
  "Composition.attester" : for src.attester as vs0 make tgt.attester as vt0 then {
    "Composition.attester.time" : for vs0.time make vt0.time 
    "Composition.attester.party" : for vs0.party make vt0.party 
  }
  "Composition.custodian" : for src.custodian make tgt.custodian 
  "Composition.relatesTo" : for src.relatesTo as vs0 make tgt.relatesTo as vt0 then {
    "Composition.relatesTo.code" : for vs0.code make vt0.code 
    "Composition.relatesTo.target-Identifier" : for vs0.target : Identifier as vs make vt0.target = create("Identifier") as vt then Identifier(vs,vt)
    "Composition.relatesTo.target-Reference" : for vs0.target : Reference as vs make vt0.target = create("Reference") as vt then Reference(vs,vt)
  }
  "Composition.event" : for src.event as vs0 make tgt.event as vt0 then {
    "Composition.event.code" : for vs0.code make vt0.code 
    "Composition.event.period" : for vs0.period make vt0.period 
    "Composition.event.detail" : for vs0.detail make vt0.detail 
  }
endgroup

