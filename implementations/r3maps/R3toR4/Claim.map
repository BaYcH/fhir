map "http://hl7.org/fhir/StructureMap/Claim3to4" = "R3 to R4 Conversions for Claim"

conceptmap "Use" {
  prefix s = "http://hl7.org/fhir/claim-use"
  prefix t = "http://hl7.org/fhir/claim-use"

  s:complete - t:claim
  s:proposed - t:preauthorization
  s:exploratory - t:predetermination
}

uses "http://hl7.org/fhir/3.0/StructureDefinition/Claim" alias ClaimR3 as source
uses "http://hl7.org/fhir/StructureDefinition/Claim" alias Claim as target

imports "http://hl7.org/fhir/StructureMap/*3to4"



group for type+types Claim extends DomainResource
  input src : ClaimR3 as source
  input tgt : Claim as target

  "Claim.identifier" : for src.identifier make tgt.identifier 
  "Claim.status" : for src.status make tgt.status 
  "Claim.type" : for src.type make tgt.type 
  "Claim.subType" : for src.subType make tgt.subType 
  "Claim.use" : for src.use as v make tgt.use = translate(v, "#Use", "code")
  "Claim.patient" : for src.patient make tgt.patient 
  "Claim.billablePeriod" : for src.billablePeriod make tgt.billablePeriod 
  "Claim.created" : for src.created make tgt.created 
  "Claim.enterer" : for src.enterer make tgt.enterer 
  "Claim.insurer" : for src.insurer make tgt.insurer 
  "Claim.provider" : for src.provider make tgt.provider 
  "Claim.fundsReserve" : for src.fundsReserve make tgt.fundsReserve 
  "Claim.prescription" : for src.prescription make tgt.prescription 
  "Claim.originalPrescription" : for src.originalPrescription make tgt.originalPrescription 
  "Claim.referral" : for src.referral make tgt.referral 
  "Claim.facility" : for src.facility make tgt.facility 
  "Claim.total" : for src.total make tgt.total 
endgroup

