# O-RIM (Ontological RIM_) definitions
# This is work in progress, and may change rapidly 

@prefix dc: <http://purl.org/dc/elements/1.1/> .
@prefix dcterms: <http://purl.org/dc/terms/> .
@prefix owl: <http://www.w3.org/2002/07/owl#> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rim: <http://hl7.org/orim/class/> .
@prefix dt: <http://hl7.org/orim/datatype/> .
@prefix vs: <http://hl7.org/orim/valueset/> .
@prefix cs: <http://hl7.org/orim/codesystem/> .
@prefix xs: <http://www.w3.org/2001/XMLSchema/> .
@prefix fhir: <http://hl7.org/fhir/> .
@prefix os: <http://open-services.net/ns/core#> .

# - ANY --------------------------------------------------------------------

dt:ANY a rdfs:Class;
   rdfs:subClassOf [
     a owl:Restriction;
     owl:onProperty dt:ANY.nullFlavor;
     owl:maxCardinality "1^^xs:nonNegativeInteger"
   ];
   dc:terms " An abstract type that defines the basic properties common to all data values defined in this specification. Data Value is an abstract type, meaning that no proper value can be just a data value without belonging to any concrete type. Every concrete type is a specialization of this general abstract DataValue type";
   dc:title "Base Data type";
   rdfs:comment "An abstract type that defines the basic properties common to all data values defined in this specification. Data Value is an abstract type, meaning that no proper value can be just a data value without belonging to any concrete type. Every concrete type is a specialization of this general abstract DataValue type";
   rdfs:label "Base Data type".

dt:ANY.nullFlavor a rdf:Property;
   dc:terms "An indicator of a data value's exceptional status, sometimes also denoting the manner and rationale for that status.";
   os:occurs os:Zero-or-one;
   rdfs:comment "An indicator of a data value's exceptional status, sometimes also denoting the manner and rationale for that status.";
   rdfs:domain dt:ANY;
   rdfs:range cs:NullFlavor.class;
   fhir:binding vs:NullFlavor;
   fhir:bindingStrength fhir:BindingStrength\#required.

# - CS ------------------------------------------------------------------

dt:CS rdfs:subClassOf dt:ANY;
   rdfs:subClassOf [
     a owl:Restriction;
     owl:onProperty dt:CS.code;
     owl:maxCardinality "1^^xs:nonNegativeInteger"
   ];
   dcterms:description "Coded data in its simplest form, where only the code is not predetermined. The code system and code system version are fixed by the context in which CS value occurs. CS is used for coded attributes that have a single HL7-defined value set";
   dc:title "CodedSimpleValue";
   rdfs:comment "Coded data in its simplest form, where only the code is not predetermined. The code system and code system version are fixed by the context in which CS value occurs. CS is used for coded attributes that have a single HL7-defined value set";
   rdfs:label "CodedSimpleValue".

dt:CS.code a rdf:Property;
   os:occurs os:Zero-or-one;
   rdfs:domain dt:CS;
   rdfs:range xs:string.

# - CD ------------------------------------------------------------------

#CD has been restructured in the oRIM to make reasoning easy, and to align with FHIR better - principally, codeSystem is a URI instead of a OID/UUID.

dt:CD rdfs:subClassOf dt:ANY;
   rdfs:subClassOf [
     a owl:Restriction;
     owl:onProperty dt:II.originalText;
     owl:maxCardinality "1^^xs:nonNegativeInteger"
   ];
   dc:title "ConceptDescriptor";
   dcterms:description "A concept defined by text and/or references to concepts defined in a code system";
   rdfs:comment "A concept defined by text and/or references to concepts defined in a code system";
   rdfs:label "ConceptDescriptor".

dt:CD.coding a rdf:Property;
   dcterms:description "A reference to a concept defined in a code system";
   rdfs:comment "A reference to a concept defined in a code system";
   os:occurs os:Zero-to-many;
   rdfs:domain dt:CD;
   rdfs:range xs:string.

dt:CD.originalText a rdf:Property;
   dcterms:description "The text as seen and/or selected by the user who entered the data which represents the intended meaning of the user";
   rdfs:comment "The text as seen and/or selected by the user who entered the data which represents the intended meaning of the user";
   os:occurs os:Zero-or-one;
   rdfs:domain dt:CD;
   rdfs:range xs:string. 
 
dt:CDCoding rdfs:subClassOf dt:ANY;
   rdfs:subClassOf [
     a owl:Restriction;
     owl:onProperty dt:II.code;
     owl:maxCardinality "1^^xs:nonNegativeInteger"
   ];
   rdfs:subClassOf [
     a owl:Restriction;
     owl:onProperty dt:II.codeSystem;
     owl:maxCardinality "1^^xs:nonNegativeInteger"
   ];
   rdfs:subClassOf [
     a owl:Restriction;
     owl:onProperty dt:II.codeSystemName;
     owl:maxCardinality "1^^xs:nonNegativeInteger"
   ];
   rdfs:subClassOf [
     a owl:Restriction;
     owl:onProperty dt:II.codeSystemVersion;
     owl:maxCardinality "1^^xs:nonNegativeInteger"
   ];
   rdfs:subClassOf [
     a owl:Restriction;
     owl:onProperty dt:II.valueSet;
     owl:maxCardinality "1^^xs:nonNegativeInteger"
   ];
   rdfs:subClassOf [
     a owl:Restriction;
     owl:onProperty dt:II.valueSetVersion;
     owl:maxCardinality "1^^xs:nonNegativeInteger"
   ];
   rdfs:subClassOf [
     a owl:Restriction;
     owl:onProperty dt:II.displayName;
     owl:maxCardinality "1^^xs:nonNegativeInteger"
   ];
   rdfs:subClassOf [
     a owl:Restriction;
     owl:onProperty dt:II.originalText;
     owl:maxCardinality "1^^xs:nonNegativeInteger"
   ];
   rdfs:subClassOf [
     a owl:Restriction;
     owl:onProperty dt:II.source;
     owl:maxCardinality "1^^xs:nonNegativeInteger"
   ];
   dc:title "ConceptDescriptorCoding";
   dcterms:description "A reference to a concept defined in a code system";
   rdfs:comment "A reference to a concept defined in a code system";
   rdfs:label "ConceptDescriptorCoding".

dt:CDCoding.code a rdf:Property;
   dcterms:description "The plain code symbol defined by the code system, or an expression in a syntax defined by the code system which describes the concept";
   rdfs:comment "The plain code symbol defined by the code system, or an expression in a syntax defined by the code system which describes the concept";
   os:occurs os:Zero-or-one;
   rdfs:domain dt:CDCoding;
   rdfs:range xs:string.

dt:CDCoding.codeSystem a rdf:Property;
   dcterms:description "The code system that defines the code";
   rdfs:comment "The code system that defines the code";
   os:occurs os:Zero-or-one;
   rdfs:domain dt:CDCoding;
   rdfs:range xs:anyURI. # in the RIM proper this must be an OID or a UUID. But for the o-RIM, we are primarily interested in statements or meaning, so we allow URL as well
   
dt:CDCoding.codeSystemName a rdf:Property;
   dcterms:description "The common name of the coding system";
   rdfs:comment "The common name of the coding system";
   os:occurs os:Zero-or-one;
   rdfs:domain dt:CDCoding;
   rdfs:range xs:string.
 
dt:CDCoding.codeSystemVersion a rdf:Property;
   dcterms:description "If applicable, a version descriptor defined specifically for the given code system";
   rdfs:comment "If applicable, a version descriptor defined specifically for the given code system";
   os:occurs os:Zero-or-one;
   rdfs:domain dt:CDCoding;
   rdfs:range xs:string.
 
dt:CDCoding.valueSet a rdf:Property;
   dcterms:description "The value set that applied when this CD was created";
   rdfs:comment "The value set that applied when this CD was created";
   os:occurs os:Zero-or-one;
   rdfs:domain dt:CDCoding;
   rdfs:range xs:string.
 
dt:CDCoding.valueSetVersion a rdf:Property;
   dcterms:description "The version of the value set that applied when this CD was created";
   rdfs:comment "The version of the value set that applied when this CD was created";
   os:occurs os:Zero-or-one;
   rdfs:domain dt:CDCoding;
   rdfs:range xs:string.
 
dt:CDCoding.displayName a rdf:Property;
   dcterms:description "A name, title, or representation for the code or expression as it exists in the code system identified by the value of codeSystem";
   rdfs:comment "A name, title, or representation for the code or expression as it exists in the code system identified by the value of codeSystem.";
   os:occurs os:Zero-or-one;
   rdfs:domain dt:CDCoding;
   rdfs:range xs:string.
 
dt:CDCoding.codingRationale a rdf:Property;
   dcterms:description "The reason a particular CD has been provided";
   rdfs:comment "The reason a particular CD has been provided";
   os:occurs os:Zero-or-one;
   rim:collectionType rim:CollectionType\#DSET;
   rdfs:domain dt:CDCoding;
   rdfs:range cs:CodingRationale.class;
   fhir:binding vs:CodingRationale;
   fhir:bindingStrength fhir:BindingStrength\#required.
      
dt:CDCoding.source a rdf:Property;
   dcterms:description "The CD from which this CD was translated, if it was translated from another CD";
   rdfs:comment "The CD from which this CD was translated, if it was translated from another CD";
   os:occurs os:Zero-or-one;
   rdfs:domain dt:CDCoding;
   rdfs:range dt:CDCoding.
   
   
# - II ------------------------------------------------------------------

dt:II rdfs:subClassOf dt:ANY;
   rdfs:subClassOf [
     a owl:Restriction;
     owl:onProperty dt:II.root;
     owl:maxCardinality "1^^xs:nonNegativeInteger"
   ];
   rdfs:subClassOf [
     a owl:Restriction;
     owl:onProperty dt:II.extension;
     owl:maxCardinality "1^^xs:nonNegativeInteger"
   ];
   rdfs:subClassOf [
     a owl:Restriction;
     owl:onProperty dt:II.identifierName;
     owl:maxCardinality "1^^xs:nonNegativeInteger"
   ];
   rdfs:subClassOf [
     a owl:Restriction;
     owl:onProperty dt:II.scope;
     owl:maxCardinality "1^^xs:nonNegativeInteger"
   ];
   rdfs:subClassOf [
     a owl:Restriction;
     owl:onProperty dt:II.reliability;
     owl:maxCardinality "1^^xs:nonNegativeInteger"
   ];
   rdfs:subClassOf [
     a owl:Restriction;
     owl:onProperty dt:II.display;
     owl:maxCardinality "1^^xs:nonNegativeInteger"
   ];
   dc:title "InstanceIdentifier";
   dcterms:description "An identifier that uniquely identifies a thing or object. Examples are object identifier for HL7 RIM objects, medical record number, order id, service catalog item id, Vehicle Identification Number (VIN), etc.";
   rdfs:comment "An identifier that uniquely identifies a thing or object. Examples are object identifier for HL7 RIM objects, medical record number, order id, service catalog item id, Vehicle Identification Number (VIN), etc.";
   rdfs:label "InstanceIdentifier".

dt:II.root a rdf:Property;
   dcterms:description "A unique identifier that guarantees the global uniqueness of the instance identifier. The root alone may be the entire instance identifier";
   rdfs:comment "A unique identifier that guarantees the global uniqueness of the instance identifier. The root alone may be the entire instance identifier";
   os:occurs os:Zero-or-one;
   rdfs:domain dt:II;
   rdfs:range xs:anyURI. # in the RIM proper this must be an OID or a UUID. But for the o-RIM, we are primarily interested in statements or meaning, so we make it URI instead
   
dt:II.extension a rdf:Property;
   dcterms:description "A character string as a unique identifier within the scope of the identifier root.";
   rdfs:comment "A character string as a unique identifier within the scope of the identifier root.";
   os:occurs os:Zero-or-one;
   rdfs:domain dt:II;
   rdfs:range xs:string.

dt:II.identifierName a rdf:Property;
   dcterms:description "This is a human-readable name for the namespace represented in the root. It is a descriptive name for the actual namespace. e.g. 'California, U.S. Driver's License Number, 1970-'.";
   rdfs:comment "This is a human-readable name for the namespace represented in the root. It is a descriptive name for the actual namespace. e.g. 'California, U.S. Driver's License Number, 1970-'.";
   os:occurs os:Zero-or-one;
   rdfs:domain dt:II;
   rdfs:range xs:string.
 
dt:II.scope a rdf:Property;
   dcterms:description "Specifies the scope in which the identifier applies to the object with which it is associated";
   rdfs:comment "Specifies the scope in which the identifier applies to the object with which it is associated";
   os:occurs os:Zero-or-one;
   rdfs:domain dt:II;
   rdfs:range cs:IdentifierScope.class;
   fhir:binding vs:IdentifierScope;
   fhir:bindingStrength fhir:BindingStrength\#required.

dt:II.reliability a rdf:Property;
   dcterms:description "Specifies the reliability with which the identifier is known. This attribute MAY be used to assist with identifier matching algorithms";
   rdfs:comment "Specifies the reliability with which the identifier is known. This attribute MAY be used to assist with identifier matching algorithms";
   os:occurs os:Zero-or-one;
   rdfs:domain dt:II;
   rdfs:range cs:IdentifierReliability.class;
   fhir:binding vs:IdentifierReliability;
   fhir:bindingStrength fhir:BindingStrength\#required.
   
dt:II.display a rdf:Property;
   dcterms:description "Specifies if the identifier is intended for human display and data entry (displayable = true) as opposed to pure machine interoperation (displayable = false)";
   rdfs:comment "Specifies if the identifier is intended for human display and data entry (displayable = true) as opposed to pure machine interoperation (displayable = false)";
   os:occurs os:Zero-or-one;
   rdfs:domain dt:II;
   rdfs:range xs:boolean.
   
      
# - InfrastructureRoot --------------------------------------------------------------------

rim:InfrastructureRoot a rdfs:Class;
   rdfs:subClassOf [
     a owl:Restriction;
     owl:onProperty rim:InfrastructureRoot.nullFlavor;
     owl:maxCardinality "1^^xs:nonNegativeInteger"
   ];
   dcterms:description "An abstract super-type for all RIM classes, either directly or through inheritance";
   dc:title "Base RIM Class";
   rdfs:comment "An abstract super-type for all RIM classes, either directly or through inheritance";
   rdfs:label "Base RIM Class".

rim:InfrastructureRoot.nullFlavor a rdf:Property;
   dcterms:description "An indicator that the class instance is null, including the flavor of null that is intended";
   os:occurs os:Zero-or-one;
   rdfs:comment "An indicator that the class instance is null, including the flavor of null that is intended";
   rdfs:domain rim:InfrastructureRoot;
   rdfs:range dt:CS;
   fhir:binding vs:NullFlavor;
   fhir:bindingStrength fhir:BindingStrength\#required.
   
# - Entity --------------------------------------------------------------------

rim:Entity rdfs:subClassOf rim:InfrastructureRoot;
   rdfs:subClassOf [
     a owl:Restriction;
     owl:onProperty rim:Entity.classCode;
     owl:maxCardinality "1^^xs:nonNegativeInteger"
   ];
   rdfs:subClassOf [
     a owl:Restriction;
     owl:onProperty rim:Entity.classCode;
     owl:minCardinality "1^^xs:nonNegativeInteger"
   ];
   rdfs:subClassOf [
     a owl:Restriction;
     owl:onProperty rim:Entity.determinerCode;
     owl:maxCardinality "1^^xs:nonNegativeInteger"
   ];
   rdfs:subClassOf [
     a owl:Restriction;
     owl:onProperty rim:Entity.determinerCode;
     owl:minCardinality "1^^xs:nonNegativeInteger"
   ];
   rdfs:subClassOf [
     a owl:Restriction;
     owl:onProperty rim:Entity.statusCode;
     owl:maxCardinality "1^^xs:nonNegativeInteger"
   ];
   rdfs:subClassOf [
     a owl:Restriction;
     owl:onProperty rim:Entity.code;
     owl:maxCardinality "1^^xs:nonNegativeInteger"
   ];
   dcterms:description "A physical thing, group of physical things or an organization capable of participating in Acts while in a role";
   dc:title "Entity";
   rdfs:comment "A physical thing, group of physical things or an organization capable of participating in Acts while in a role";
   rdfs:label "Entity".
 
rim:Entity.classCode a rdf:Property;
   dcterms:description "The major class of Entities to which an Entity-instance belongs";
   os:occurs os:Exactly-one;
   rdfs:comment "The major class of Entities to which an Entity-instance belongs";
   rdfs:domain rim:Entity;
   rdfs:range cs:EntityClass.class;
   fhir:binding vs:EntityClass;
   fhir:bindingStrength fhir:BindingStrength\#required.
   
rim:Entity.determinerCode a rdf:Property;
   dcterms:description "A code specifying whether the Entity object represents a universal (KIND) vs. a particular (INSTANCE)";
   os:occurs os:Exactly-one;
   rdfs:comment "A code specifying whether the Entity object represents a universal (KIND) vs. a particular (INSTANCE)";
   rdfs:domain rim:Entity;
   rdfs:range cs:EntityDeterminer.class;
   fhir:binding vs:EntityDeterminer;
   fhir:bindingStrength fhir:BindingStrength\#required.
   
rim:Entity.statusCode a rdf:Property;
   dcterms:description "A value representing whether the information associated with an Entity is currently active or inactive for the purpose of participation in acts";
   os:occurs os:Zero-or-one;
   rdfs:comment "A value representing whether the information associated with an Entity is currently active or inactive for the purpose of participation in acts";
   rdfs:domain rim:Entity;
   rdfs:range cs:EntityStatus.class;
   fhir:binding vs:EntityStatus;
   fhir:bindingStrength fhir:BindingStrength\#required.

rim:Entity.id a rdf:Property;
   dcterms:description "A unique identifier for the Entity";
   os:occurs os:Zero-to-many;
   rim:collectionType rim:CollectionType\#DSET;
   rdfs:comment "A unique identifier for the Entity";
   rdfs:domain rim:Entity;
   rdfs:range dt:II.
   
rim:Entity.code a rdf:Property;
   dcterms:description "The specific kind of Entity to which an Entity-instance belongs";
   os:occurs os:Zero-or-one;
   rim:collectionType rim:CollectionType\#DSET;
   rdfs:comment "The specific kind of Entity to which an Entity-instance belongs";
   rdfs:domain rim:Entity;
   rdfs:range dt:CD;
   fhir:binding vs:EntityCode;
   fhir:bindingStrength fhir:BindingStrength\#extensible.
   
   
#- for all classes mapped to acts, we know what happened to classCode, moodCode, code, negationInd,x2, statusCode, id
#- for all classes mapped to roles, we know what happened to classCode, statusCode, code, negationInd, id, and player,
#- for all classes mapped to entities, we know what happened to classCode, determineCode, id, code, statusCode   

# vocab... pasted here at the end by the build tool
