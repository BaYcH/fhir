<?xml version="1.0" encoding="UTF-8"?>
<WorkflowExample xmlns="http://hl7.org/fhir" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://hl7.org/fhir ../../schema/workflowexample.xsd">
	<id value="example"/>

	<title value="Mobile Medication Administration"/> 
	<status value="draft"/>

	<description value="This scenario demonstrates the process of getting the relevant medication instructions for a patient visit and reporting the results of administration. The scenario is as follows: After the prescription is issued, the institution schedules each individual administration event in the Medication Administration Record (MAR). When preparing for a visit, the nurse queries the MAR for the scheduled administrations, obtaining a bundle of records. The nurse then performs the care activities and registers the results in the device. Upon synchronization of the device and the institution, the results of administration are uploaded to the EHR, thus updating the MAR." />
	<purpose value="Purpose: this serves to enable remote performing of medication administration, by using remote / mobile devices to a) Get the planned medication administrations and b) Record the performing of these administrations without a permanent connection to the EHR."/>

	<!-- First define actors--> 
	<actor>
		<actorId value="Nurse"/>
		<type value="person"/>
		<name value="Nurse"/>
		<description value="The Nurse" />
	</actor>
	<actor>
		<actorId value="OP"/>
		<type value="entity"/>
		<name value="Medication Administration Order Placer" />
		<description value="The Medication Administration Order Placer" />
	</actor>
	<actor>
		<actorId value="MAP"/>
		<type value="entity"/>
		<name value="Medication Administration Performer" />
		<description value="The entity that receives the Administration Requests to show the nurse to perform them" />
	</actor>	
	<actor>
		<actorId value="MAI"/>
		<type value="entity"/>
		<name value="Medication Administration Informer" />
		<description value="The entity that registers information about the administration execution" />
	</actor>
	<actor>
		<actorId value="MAC"/>
		<type value="entity"/>
		<name value="Medication Administration Consumer" />
		<description value="The entity that receives the Medication Administration reports" />
	</actor>


	<!-- Then define the resource instances --> 

	<instance>
		<resourceId value="iherx001"/>
		<resourceType value="MedicationRequest"/>
		<name value="Initial Prescription"/>
		<description value="The initial prescription which describes &quot;medication X, 3 times per day&quot; - the exact scheduling is not   in the initial prescription (it is left for the care teams to decide on the schedule)."/>
	</instance>
	<instance>
		<resourceId value="iherx001.001"/>
		<resourceType value="MedicationRequest"/>
		<name value="Request for day 1, morning" />
		<description value="The administration request for day 1, morning" />
	</instance>
	<instance>
		<resourceId value="iherx001.002" />
		<resourceType value="MedicationRequest"/>
		<name value="Request for day 1, lunch" />
		<description value="The administration request for day 1, lunch" />
	</instance>
	<instance>
		<resourceId value="iherx001.003" />
		<resourceType value="MedicationRequest"/>
		<name value="Request for day 1, evening" />
		<description value="The administration request for day 1, evening" />
	</instance>
	<instance>
		<resourceId value="iherx001.004" />
		<resourceType value="MedicationRequest"/>
		<name value="Request for day 2, morning" />
		<description value="The administration request for day 2, morning" />
	</instance>
	<instance>
		<resourceId value="iherx001.005" />
		<resourceType value="MedicationRequest"/>
		<name value="Request for day 2, lunch" />
		<description value="The administration request for day 2, lunch" />
	</instance>
	<instance>
		<resourceId value="iherx001.006" />
		<resourceType value="MedicationRequest"/>
		<name value="Request for day 2, evening" />
		<description value="The administration request for day 2, evening" />
	</instance>

	<!-- QUESTION: How to define search actions?-->		
	<instance>
		<resourceId value="ihesearchparam_rx.performer"/>
		<resourceType value="SearchParameter"/>
		<name value="Search query1" />
		<description value="The search administration request for day 1, morning" />
	</instance>	

	<process>
		<title value="Mobile Medication Administration"/>
		<description value="Mobile Medication Administration" />
		<preConditions value="Medication administration requests are in the EHR / MAR, scheduled for each individual intake."/>
		<postConditions value="Medication administration Reports are submitted, EHR is updated."/>

		<operation> 
			<number value="1"/> 
			<name value="Get today's schedule"/> 
			<initiator value="Nurse"/> 
			<receiver value="MAP"/> 
		</operation>		

<!--
		<process> 
			<title value="Query Administration Requests"/> 
			<description value="Query for medication administration orders,\n- For today's shifts\n- For today's patients" />

			<operation> 
				<number value="2"/> 
				<name value="Query for medication administration orders,\n- For today's shifts\n- For today's patients"/>
				<initiator value="MAP"/> 
				<receiver value="OP"/> 
				<instance>
					<instanceId value="ihesearchparam_rx.performer"/>
				</instance>
			</operation>



			<operation>
				<number value="3"/> 
				<name value="Return medication administration orders" />
				<initiator value="OP"/> 
				<receiver value="MAP"/> 
				<description value="Return medication administration orders" />
				<instance>
					<instanceId value="iherx001.001"/>
				</instance>
				<instance>
					<instanceId value="iherx001.002"/>
				</instance>
				<instance>
					<instanceId value="iherx001.003"/>
				</instance>
				<instance>
					<instanceId value="iherx001.004"/>
				</instance>
				<instance>
					<instanceId value="iherx001.005"/>
				</instance>
				<instance>
					<instanceId value="iherx001.006"/>
				</instance>
			</operation>


		</process>	

		<pause value="true"/>		


		<operation>		
			<number value="4"/> 
			<name value="Notify (alert)"/> 
			<initiator value="MAP"/> 
			<receiver value="Nurse"/> 
			<dotted value="true"/>
		</operation>
		<operation>		
			<number value="5"/> 
			<name value="Read orders"/> 
			<initiator value="Nurse"/> 
			<receiver value="MAP"/> 
			<dotted value="true"/>
		</operation>
		<operation>		
			<number value="6"/> 
			<name value="Administer drug"/> 
			<initiator value="Nurse"/> 
			<receiver value="Nurse"/> 
			<dotted value="true"/>
		</operation>
		<operation>		
			<number value="7"/> 
			<name value="Register administration"/> 
			<initiator value="Nurse"/> 
			<receiver value="MAI"/> 
			<dotted value="true"/>
			<initiatorActive value="true"/>
		</operation>

		<pause value="true"/>		

		<process>
			<operation>		
				<number value="7"/> 
				<name value="Nurse updates administration report"/> 
				<initiator value="Nurse"/> 
				<receiver value="MAI"/> 
				<initiatorActive value="true"/>
				<instance>
					<instanceId value="iheadm001.002" />
				</instance>
			</operation>
		</process>

		<pause value="true"/>		

		<process>
			<number value="6"/> 
			<name value="Upload administration reports"/>
			<description value="The nurse's system uploads the administration results to the server"/>
			<group value="true"/>
			<operation>		
				<number value="8"/> 
				<name value="Refresh"/> 
				<initiator value="MAP"/> 
				<receiver value="MAC"/> 
				<dotted value="true"/>	
				<instance>
					<instanceId value="iheadm001.001" />
				</instance>	
				<instance>
					<instanceId value="iheadm001.002" />
				</instance>

			</operation>		
		</process>

-->

	</process>


</WorkflowExample>


